<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Itinerary Planning</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<style>
		body {
			font-family: Arial, sans-serif;
		}

		.hero {
			background: url("./images/Pathar.jpg") no-repeat center center/cover;
			color: white;
			padding: 150px 0;
			/* Increased padding */
			text-align: center;
			position: relative;
			height: 60vh;
			/* Adjusted height */
		}

		.hero-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.2);
		}

		.form-section {
			padding: 100px 0;
		}

		.results-section {
			padding: 50px 0;
			display: none;
		}

		.navbar {
			background-color: rgba(0, 0, 0, 0.8);
		}
	</style>
</head>

<body>
	<!-- Header -->
	<!-- Header -->
	<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
		<a class="navbar-brand" href="index.html">AI RoadTrip Planner</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
			aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<a class="nav-link" href="index.html">Home</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="iternary.html">Plan a Trip</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="charging.html">Charging Stations</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="contact.html">Contact Us</a>
				</li>
			</ul>
		</div>
	</nav>

	<!-- Hero Section -->
	<div class="hero">
		<div class="hero-overlay"></div>
	</div>

	<!-- Trip Planning Form -->
	<div id="plan-trip" class="form-section container">
		<h2 class="text-center">Plan Your Trip</h2>
		<form id="itinerary-form">
			<div class="form-group">
				<input type="text" class="form-control" id="city" placeholder="Enter a city" required />
			</div>
			<div class="text-center"> <!-- Add text-center class for center alignment -->
				<button type="submit" class="btn btn-primary">Generate Itinerary</button>
			</div>
		</form>
	</div>

	<!-- Results Section -->
	<div id="results" class="results-section container">
		<h2 class="text-center">Your Itinerary</h2>
		<div class="card mb-3">
			<div class="card-body">
				<h5 class="card-title">Itinerary Details</h5>
				<p id="itinerary-details" class="card-text">[Generated itinerary details will appear here]</p>
			</div>
		</div>
	</div>
	<!-- JavaScript code to handle form submission and send request to backend -->
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const form = document.getElementById('itinerary-form');
			form.addEventListener('submit', function (event) {
				event.preventDefault();

				const city = document.getElementById('city').value;

				// Send a GET request to the backend endpoint /askAI/plan?city=<city>
				fetch(`/askAI/plan?city=${city}`)
					.then(response => {
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						return response.text();
					})
					.then(data => {
						// Add line breaks after periods in the generated itinerary details
						data = data.replace(/\./g, '.<br>'); // Add line breaks after periods
						// Display the generated itinerary details in the results section
						document.getElementById('itinerary-details').innerHTML = data;
						document.getElementById('results').style.display = 'block';
					})
					.catch(error => {
						console.error('There was a problem with the fetch operation:', error);
					});
			});
		});
	</script>
	<!-- End of JavaScript code -->

</body>

</html>